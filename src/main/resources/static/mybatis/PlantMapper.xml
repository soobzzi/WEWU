<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		
<mapper namespace = "life.wewu.web.service.plant.PlantDao">
	
	<resultMap id="PlantSelectMap" type="life.wewu.web.domain.plant.Plant" >
		<result property="plantNo" 			column="plant_no" 			jdbcType="INTEGER"/>
		<result property="plantName"		column="plant_name" 		jdbcType="VARCHAR" />
		<result property="plantLevlNo"		column="plant_levl_no" 		jdbcType="VARCHAR" />
		<result property="plantLevl"		column="plant_levl" 		jdbcType="VARCHAR" />
		<result property="plantMinExp"		column="plant_min_exp" 		jdbcType="INTEGER" />
		<result property="plantMaxExp"		column="plant_max_exp" 		jdbcType="INTEGER" />
		<result property="plantFinalLevl"	column="plant_final_levl" 	jdbcType="VARCHAR" />
		<result property="levlImg"			column="levl_img" 			jdbcType="VARCHAR" />
	</resultMap>
	
	
	<!-- ADD PLANT -->
	<insert id="addPlantName" useGeneratedKeys="true" keyProperty="plantNo">
        INSERT INTO plant (plant_no, plant_name)
        VALUES (AUTO_INCREMENT,#{plantName})
    </insert>

    <!-- plant_levl 테이블에 데이터 삽입 -->
    <insert id="addPlantLevl" parameterType="life.wewu.web.domain.plant.Plant">
        INSERT INTO plant_levl (plant_no, plant_levl, plant_min_exp, plant_max_exp, plant_final_levl, levl_img)
        VALUES (#{plantNo}, #{plantLevl}, #{plantMinExp}, #{plantMaxExp}, #{plantFinalLevl}, #{levlImg})
    </insert>
	
	<!-- UPDATE PLANT -->
	<update id="updatePlant" parameterType="life.wewu.web.domain.plant.Plant">
		UPDATE plant
		<set>
			plant_name = #{plantName}
		</set>
			WHERE plant_no = #{plantNo}
	</update>
	
	<!-- UPDATE PLANTLEVL -->
	<update id="updatePlantLevl" parameterType="life.wewu.web.domain.plant.Plant">
		UPDATE plant_levl	
		<set>
			plant_levl = #{plantLevl}
			plant_min_exp = #{plant_min_exp}
			plant_max_exp = #{plant_max_exp}
			plant_final_levl = #{plant_final_levl}
			levl_img = #{levl_img}
		</set>
		<where>
			plant_no = #{plantNo}
		</where>
		
	</update>
	
	<!-- DELETE PLANT -->
	<delete id="deletePlant">
		DELETE FROM plant
		WHERE plant_no = #{plant_no}
	</delete>
	
	<select id="getPlant" parameterType="int" resultMap="PlantSelectMap">
		SELECT p.plant_no, p.plant_name ,le.plant_levl, le.plant_min_exp, le.plant_max_exp ,le.plant_final_levl ,le.levl_img
		FROM plant p, plant_levl le
		WHERE p.plant_no = le.plant_no
		AND p.plant_no = #{value}
	</select>
	
	<select id="getPlantList" parameterType="life.wewu.web.common.Search" resultMap="PlantSelectMap">
		SELECT p.plant_name ,le.plant_levl, le.plant_min_exp, le.plant_max_exp ,le.plant_final_levl ,le.levl_img
		FROM plant p, plant_levl le
		WHERE p.plant_no = le.plant_no
	</select>
	
	
	
</mapper>
			